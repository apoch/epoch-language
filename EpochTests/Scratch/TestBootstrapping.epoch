structure Stuff :
	string Test,
	integer Field

type StuffNode : Stuff | nothing

structure Wrap :
	integer Test,
	StuffNode Root,
	integer Foo


entrypoint :
{
	Wrap test = 0, nothing, 42
	Stuff stuff = "Test", 666

	Set(test.Root, stuff)

	Check(test.Root)

	print("Done")
}


Set : StuffNode ref n, Stuff ref s
{
	StuffNode w = s
	n = w
}



Check : Stuff ref s
{
	print("PASS")
	print(s.Test)
}

Check : nothing
{
	print("FAIL")
}

